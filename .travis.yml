sudo: required
dist: trusty
services:
- docker
language: generic
python:
- "2.7"
env:
  matrix:
  - ROS_DISTRO=melodic UPSTREAM_WORKSPACE=file
branches:
  only:
  - master
  - develop
  - melodic-devel

install:
- wget https://github.com/protocolbuffers/protobuf/releases/download/v3.6.1/protobuf-all-3.6.1.tar.gz
- tar -xzvf protobuf-all-3.6.1.tar.gz
- pushd protobuf-3.6.1 && ./configure --prefix=/usr && make && sudo make install && popd
- git clone https://github.com/ros-industrial/industrial_ci.git .ci_config

script:
- source .ci_config/travis.sh